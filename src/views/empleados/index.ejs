<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head') %>
   <%- include('../partials/header') %>

      <body>
         <div class="container text-center py-4">
            <!-- Fila que organiza las columnas -->
            <div class="row g-3">
               <!-- Columna que se adapta a diferentes tamaños de pantalla -->
               <div class="col-12 col-sm-6 col-md-4">
                  <div class="custom-card bg-light p-3">
                     <h3>Empleado 1</h3>
                     <p>Información del empleado, como nombre, cargo, etc.</p>
                  </div>
               </div>
               <div class="col-12 col-sm-6 col-md-4">
                  <div class="custom-card bg-light p-3">
                     <h3>Empleado 2</h3>
                     <p>Información del empleado, como nombre, cargo, etc.</p>
                  </div>
               </div>
               <div class="col-12 col-sm-6 col-md-4">
                  <div class="custom-card bg-light p-3">
                     <h3>Empleado 3</h3>
                     <p>Información del empleado, como nombre, cargo, etc.</p>
                  </div>
               </div>
               <div class="col-12 col-sm-6 col-md-12">
                  <div class="custom-card bg-light p-3">
                     <div class="table-responsive">
                        <table id="example" class="table table-bordered table-striped-columns table-hover">
                           <thead>
                              <tr>
                                 <th scope="col">#</th>
                                 <th scope="col">cedula</th>
                                 <th scope="col">primer_nombre</th>
                                 <th scope="col">segundo_nombre</th>
                                 <th scope="col">primer_apellido</th>
                                 <th scope="col">segundo_apellido</th>
                                 <th scope="col">Creado</th>
                                 <th scope="col">Actualizado</th>
                              </tr>
                           </thead>
                           <tbody>

                           </tbody>
                        </table>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <%- include('../partials/scripts') %>
            <script>
               $(document).ready(function () {
                  let userRole = null;

                  const table = $("#example").DataTable({
                     language: {
                        decimal: ",",
                        thousands: ".",
                        lengthMenu: "Mostrar _MENU_ registros",
                        zeroRecords: "No se encontraron registros",
                        info: "Mostrando _START_ a _END_ de _TOTAL_ registros",
                        infoEmpty: "Mostrando 0 a 0 de 0 registros",
                        infoFiltered: "(filtrado de _MAX_ registros totales)",
                        search: "Buscar:",
                        paginate: {
                           first: "<<",
                           last: ">>",
                           next: ">",
                           previous: "<"
                        },
                        processing: "Procesando...",
                        loadingRecords: "Cargando...",
                        emptyTable: "No hay datos disponibles en la tabla",
                        aria: {
                           sortAscending: ": activar para ordenar la columna de manera ascendente",
                           sortDescending: ": activar para ordenar la columna de manera descendente"
                        }
                     },
                     ajax: {
                        url: '/empleados/data',
                        dataSrc: function (response) {
                           console.log(response);
                           // Guardamos el rol del usuario
                           userRole = response.user?.rol;
                           // Devolvemos los datos para que DataTables los pinte inicialmente
                           return response.data || [];
                        },
                     },
                     columns: [
                        { data: 'id', defaultContent: 'N/A' },
                        { data: 'cedula', defaultContent: 'N/A' },
                        { data: 'primer_nombre', defaultContent: 'N/A' },
                        { data: 'segundo_nombre', defaultContent: 'N/A' },
                        { data: 'primer_apellido', defaultContent: 'N/A' },
                        { data: 'segundo_apellido', defaultContent: 'N/A' },
                        { data: 'created_at', defaultContent: 'N/A' },
                        { data: 'updated_at', defaultContent: 'N/A' },
                     ],
                     initComplete: function () {
                        if (userRole !== 1 && userRole !== 3) {
                           // Oculta las columnas 6 y 7 (índices empiezan en 0)
                           table.column(6).visible(false);
                           table.column(7).visible(false);
                        }
                     }
                  });
               });
            </script>
      </body>

</html>